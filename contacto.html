<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contacto ‚Äî DMTP</title>
  <meta name="description" content="Contacto directo con DMTP: correo, WhatsApp, Instagram y formulario de consultas." />
  <meta property="og:title" content="Contacto ‚Äî DMTP" />
  <meta property="og:description" content="Escr√≠benos para asesor√≠as, cenas privadas o proyectos gastron√≥micos." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0b0b0b" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#0b0b0b; --card:#141414; --muted:#9aa0a6; --text:#e8eaed; --brand:#84cc16; --accent:#a3e635; --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.35); }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;scroll-behavior:smooth}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:900px;margin:0 auto;padding:24px}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(11,11,11,.95),rgba(11,11,11,.75),transparent);backdrop-filter:saturate(1.2) blur(6px)}
    .nav{display:flex;align-items:center;gap:18px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.5px}
    .brand-dot{width:10px;height:10px;border-radius:999px;background:linear-gradient(135deg,var(--brand),var(--accent))}
    .links a{padding:10px 12px;border-radius:10px;color:var(--text)}
    .links a:hover{background:rgba(255,255,255,.06)}
    h1{font-size:clamp(28px,4vw,46px);margin:20px 0;color:var(--accent)}
    .card{background:var(--card);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow);border:1px solid rgba(255,255,255,.08);margin-bottom:20px}
    form{display:grid;gap:14px}
    label{font-weight:600}
    input,textarea,select{padding:10px;border-radius:10px;border:none;background:#1f1f1f;color:#e8eaed;font-size:15px}
    textarea{min-height:140px;resize:vertical}
    button{background:linear-gradient(135deg,var(--brand),var(--accent));color:#0b0b0b;font-weight:700;border:none;padding:12px;border-radius:12px;cursor:pointer}
    .status{margin-top:8px;font-size:14px}
    .ok{color:#a3e635}.err{color:#ff7b7b}
    .debug{font-family:ui-monospace,Consolas,monospace;font-size:12px;background:#0f0f0f;border:1px solid rgba(255,255,255,.1);border-radius:10px;padding:10px;color:#c9cccf;display:none;white-space:pre-wrap}
    .toggle-debug{background:rgba(255,255,255,.08);color:#c9cccf;border:none;padding:6px 10px;border-radius:8px;cursor:pointer;font-size:12px}
    footer{margin:36px 0 20px;color:#9aa0a6;font-size:14px;text-align:center}
    .hint{font-size:12px;color:#9aa0a6}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    const EMAILJS_PUBLIC_KEY = "REEMPLAZAR_EMAILJS_PUBLIC_KEY";
    const EMAILJS_SERVICE_ID = "REEMPLAZAR_SERVICE_ID";
    const EMAILJS_TEMPLATE_ID = "REEMPLAZAR_TEMPLATE_ID";
    const NOTIFY_WEBHOOK_URL = "REEMPLAZAR_WEBHOOK_URL"; // opcional
    const TO_EMAIL = "cristobal29.ct@gmail.com";

    document.addEventListener("DOMContentLoaded", () => {
      try{
        if(EMAILJS_PUBLIC_KEY && !EMAILJS_PUBLIC_KEY.startsWith("REEMPLAZAR")){
          emailjs.init({ publicKey: EMAILJS_PUBLIC_KEY });
        } else {
          console.warn("Falta configurar EmailJS PUBLIC KEY");
        }
      }catch(err){ console.error("Error iniciando EmailJS:", err); }
    });

    function setStatus(msg, cls){
      const s = document.getElementById("status");
      s.textContent = msg;
      s.className = "status " + (cls||"").trim();
    }
    function showDebug(obj){
      const dbg = document.getElementById("debug");
      dbg.style.display = "block";
      dbg.textContent = typeof obj === 'string' ? obj : JSON.stringify(obj, null, 2);
    }

    async function enviarFormulario(e){
      e.preventDefault();
      setStatus("Enviando‚Ä¶", "");
      const btn = document.getElementById("enviar");
      btn.disabled = true;

      const nombre = document.getElementById("nombre").value.trim();
      const telefono = document.getElementById("telefono").value.trim();
      const correo = document.getElementById("correo").value.trim();
      const motivo = document.getElementById("motivo").value;
      const mensaje = document.getElementById("mensaje").value.trim();
      const timestamp = new Date().toISOString();

      const cuerpo = `üßæ NUEVA CONSULTA DMTP
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üë§ Nombre: ${nombre}
üìû Tel√©fono: ${telefono}
‚úâÔ∏è Correo: ${correo}
üìå Motivo: ${motivo}

üìù Mensaje:
${mensaje}

Enviado desde DMTP.cl ‚Äî ${new Date().toLocaleString()}`;

      try {
        if(EMAILJS_PUBLIC_KEY && !EMAILJS_PUBLIC_KEY.startsWith("REEMPLAZAR")){
          const emailParams = { to_email: TO_EMAIL, nombre, telefono, correo, motivo, mensaje, cuerpo, timestamp };
          const res = await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, emailParams);
          showDebug({ emailjs_response: res });
        } else {
          showDebug("EmailJS no configurado: reemplaza tus claves PUBLIC_KEY/SERVICE_ID/TEMPLATE_ID");
        }

        if(NOTIFY_WEBHOOK_URL && !NOTIFY_WEBHOOK_URL.startsWith("REEMPLAZAR")){
          const payload = { fuente: "DMTP sitio web", to_email: TO_EMAIL, nombre, telefono, correo, motivo, mensaje, cuerpo, timestamp };
          try {
            const r = await fetch(NOTIFY_WEBHOOK_URL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
              mode: "cors"
            });
            showDebug({ webhook_status: r.status });
          } catch (werr){
            try{
              const ok = navigator.sendBeacon(NOTIFY_WEBHOOK_URL, new Blob([JSON.stringify(payload)], {type: 'text/plain'}));
              showDebug({ webhook_sendBeacon: ok });
            }catch(be){ showDebug({ webhook_beacon_error: String(be) }); }
          }
        }

        setStatus("¬°Gracias! Tu mensaje fue enviado.", "ok");
        e.target.reset();
      } catch (err){
        console.error(err);
        setStatus("Hubo un problema al enviar. Revisa las claves o intenta WhatsApp.", "err");
        showDebug({ error: String(err) });
      } finally {
        btn.disabled = false;
      }
    }
  </script>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand"><span class="brand-dot"></span> DMTP</div>
      <nav class="links">
        <a href="index.html">Inicio</a>
        <a href="planes.html">Asesor√≠as</a>
        <a href="proyectos.html">Proyectos</a>
        <a href="contacto.html">Contacto</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <h1>Contacto</h1>

    <div class="card">
      <h2>Informaci√≥n directa</h2>
      <p><strong>Email:</strong> <a href="mailto:cristobal29.ct@gmail.com">cristobal29.ct@gmail.com</a></p>
      <p><strong>WhatsApp:</strong> <a href="https://wa.me/56920037224" target="_blank">+56 9 2003 7224</a></p>
      <p><strong>Instagram:</strong> <a href="https://www.instagram.com/dmtp_oficial?igsh=cnY2MTN3aWJzZHNn" target="_blank">@dmtp_oficial</a></p>
    </div>

    <div class="card">
      <h2>Env√≠anos un mensaje</h2>
      <form onsubmit="enviarFormulario(event)">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required>

        <label for="telefono">N√∫mero de contacto:</label>
        <input type="tel" id="telefono" name="telefono" required inputmode="tel" placeholder="+56 9 ...">

        <label for="correo">Correo electr√≥nico:</label>
        <input type="email" id="correo" name="correo" required>

        <label for="motivo">Motivo:</label>
        <select id="motivo" name="motivo" required>
          <option value="Asesor√≠as">Asesor√≠as</option>
          <option value="Proyectos ‚Äî Matrimonios">Proyectos ‚Äî Matrimonios</option>
          <option value="Proyectos ‚Äî Platos del chef">Proyectos ‚Äî Platos del chef</option>
          <option value="Proyectos ‚Äî Cenas de maridajes">Proyectos ‚Äî Cenas de maridajes</option>
          <option value="Otro">Otro</option>
        </select>

        <label for="mensaje">Cu√©ntanos tu problema:</label>
        <textarea id="mensaje" name="mensaje" required placeholder="Formato sugerido:
- ¬øQu√© necesitas?
- Ciudad/fecha tentativas
- N¬∫ de personas / presupuesto aprox.
- Restricciones alimentarias
- C√≥mo prefieres que te contactemos"></textarea>

        <button id="enviar" type="submit">Enviar mensaje</button>
        <div class="status hint" id="status">El env√≠o genera un correo a cristobal29.ct@gmail.com y puede notificar al celular.</div>
        <button type="button" class="toggle-debug" onclick="document.getElementById('debug').style.display = (document.getElementById('debug').style.display==='block'?'none':'block');">Ver/Ocultar debug</button>
        <div id="debug" class="debug"></div>
      </form>
    </div>
  </main>

  <footer>
    ¬© <span id="y"></span> DMTP ‚Ä¢ Hecho con ‚ô• en Chile ¬∑ <a href="index.html">Inicio</a>
  </footer>

  <script> document.getElementById('y').textContent = new Date().getFullYear(); </script>
</body>
</html>
